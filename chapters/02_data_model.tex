\section{Data Model \& Integration Strategy}

\subsection{Relational Model (PostgreSQL)}
\begin{verbatim}
CREATE TABLE clients (
  id SERIAL PRIMARY KEY,
  zoho_id TEXT UNIQUE NOT NULL,
  name TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
-- projects, invoices likewise...
\end{verbatim}

\subsection{ER Diagram}
\begin{figure}[h]
  \centering
  \includegraphics[width=\linewidth]{diagrams/data_model_er.svg}
  \caption{Entity-Relationship Diagram (PostgreSQL)}
\end{figure}

\subsection{Graph Model (Neo4j)}
\begin{figure}[h]
  \centering
  \includegraphics[width=\linewidth]{diagrams/graph_model.svg}
  \caption{Graph sketch for lineage and complex relationships}
\end{figure}

\subsection{Integration Patterns}
\begin{itemize}
  \item \textbf{Real-time Webhooks}: Zoho → \texttt{/zoho/webhook} → RabbitMQ
  \item \textbf{Nightly ETL}: Full table snapshots for analytics
  \item \textbf{GraphQL Federation}: Stitch Zoho REST + local data under one schema
\end{itemize}

\subsubsection{Apollo Federation Example}
\begin{minted}{javascript}
// Apollo Federation example
const zohoREST = new RESTDataSource({...});
const typeDefs = gql`
  extend type Query {
    zohoContacts: [Contact]
  }
`;
const resolvers = {
  Query: { 
    zohoContacts: (_, __, { dataSources }) => 
      dataSources.zohoREST.getContacts() 
  }
};
\end{minted} 

\subsection{RESTful API Architecture}

The integration layer exposes a well-designed API following REST principles and enterprise patterns:

\begin{minted}{yaml}
# api-specification.yml
openapi: 3.0.3
info:
  title: DFAP Integration API
  version: 1.0.0
  
paths:
  /api/v1/projects:
    post:
      summary: Create project from qualified lead
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lead_id: { type: string, format: uuid }
                client_id: { type: string }
                estimated_hours: { type: integer, minimum: 1 }
                complexity_score: { type: integer, minimum: 1, maximum: 5 }
      responses:
        201:
          description: Project created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
                
  /api/v1/analytics/project-health/{project_id}:
    get:
      summary: Get project health metrics (demonstrates graph queries)
      parameters:
        - name: project_id
          in: path
          required: true
          schema: { type: string }
      responses:
        200:
          description: Project health analysis
          content:
            application/json:
              schema:
                type: object
                properties:
                  health_score: { type: number, format: float }
                  risk_factors: { type: array, items: { type: string } }
                  recommendation: { type: string }
                  billing_forecast: { type: number, format: float }
\end{minted} 